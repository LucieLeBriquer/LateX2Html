\newpage
\section{Compilation}

\subsection{Généralités}
\ni
Il y a 3 phases de compilation :
\begin{itemize}
    \item préprocess : ajout de plein de codes via les includes, \verb|cpp fichier.c| pour affichier les codes introduits
    \item compilation : création d'un fichier objet \verb|.o| à partir du \verb|.c| via par exemple \verb|gcc -c main.c|
    \item link des différents fichiers objets, dans un \verb|.o| il n'y a pas d'erreur si la fonction appelée n'existe pas, c'est lors du link qu'il va la faire correspondre à une fonction dans un autre \verb|.o|
\end{itemize}
Comprendre cette décomposition permet de recompiler uniquement les fichiers modifiés et donc gagner du temps. Au moment du link seule l'existence est vérifiée mais pas le typage !

\subsection{Include}
\begin{itemize}
    \item \verb|#include <...>| : directives de bases du compilateur
    \item \verb|#include "..."| : fichier spécifique, ou l'inclure avec \verb|gcc -i|, ce genre d'include copie textuellement le fichier à cet endroit là, en général pas une bonne idée les includes de \verb|.c|
    \item \verb|.h| : fichier contenant les prototypes de fonctions, inclus dans le main et dans le fichier, permet de faire gaffe à la correspondance des types, et propage les changements
    \item \verb!|! : \verb!||!, \verb|coucou|
\end{itemize}

\subsection{Define et variables}
\begin{itemize}
    \item \verb|#define VAR blbl| : remplace \emph{textuellement} à l'endroit appelé, convention de nommer ces variables en majuscules
    \item \verb|#define LOL(x) ...| : on peut définir ces variables avec des paramètres, souvent dangereux et illisible
    \item \verb|gcc -DVAR=90 main.c| : on peut définir les variables directement en appelant gcc
\end{itemize}

\subsection{Préprocesseur de contrôle : if, else}
\begin{itemize}
    \item \verb|#if|, \verb|else| : marche comme en LateX
    \item \verb|#ifdef|, \verb|#ifndef| : pour vérifier la définition ou non d'une variable, permet de debug mais aussi de protéger les \verb|.h| qui sont souvent inclus plusieurs fois
        \begin{verbatim}
        #ifndef __FCT_H__
        #define __FCT_H__
        code
        #endif
        \end{verbatim}
\end{itemize}
